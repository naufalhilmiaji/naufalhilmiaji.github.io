@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --color-bg-base: var(--bg-base);
  --color-bg-surface: var(--bg-surface);
  --color-bg-soft: var(--bg-soft);

  --color-text-main: var(--text-main);
  --color-text-muted: var(--text-muted);

  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);

  --color-border-subtle: var(--border-subtle);

  --font-sans: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

@layer base {

  /* Dark mode is the default */
  :root,
  html[data-theme="dark"] {
    --bg-base: #0c0c0e;
    --bg-surface: #131316;
    --bg-soft: #1c1c21;

    --text-main: #e4e4e7;
    /* zinc-200 */
    --text-muted: #a1a1aa;
    /* zinc-400 */

    --accent: #6366f1;
    /* indigo-500 */
    --accent-hover: #818cf8;
    /* indigo-400 */

    --border-subtle: #27272a;
    /* zinc-800 */
  }

  html[data-theme="light"] {
    --bg-base: #fcfcfc;
    --bg-surface: #f4f4f5;
    /* zinc-100 */
    --bg-soft: #e4e4e7;
    /* zinc-200 */

    --text-main: #18181b;
    /* zinc-900 */
    --text-muted: #52525b;
    /* zinc-600 */

    --accent: #4f46e5;
    /* indigo-600 */
    --accent-hover: #4338ca;
    /* indigo-700 */

    --border-subtle: #e4e4e7;
    /* zinc-200 */
  }

  body {
    @apply bg-bg-base text-text-main font-sans antialiased selection:bg-accent/30;
  }
}

@layer components {

  /* Fix Shiki dual themes mapping to data-theme */
  html[data-theme='dark'] .astro-code,
  html[data-theme='dark'] .astro-code span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
    font-style: var(--shiki-dark-font-style) !important;
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
  }

  /* Inline code highlighting inside prose */
  .prose :not(pre)>code {
    @apply text-accent-hover bg-bg-soft px-1.5 py-0.5 rounded-md;
  }

  .prose :not(pre)>code::before,
  .prose :not(pre)>code::after {
    content: none;
  }
}

@layer utilities {
  .transition-soft {
    @apply transition-all duration-300 ease-out;
  }
}